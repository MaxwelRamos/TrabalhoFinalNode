<!doctype html>
<html lang="pt-br">
    <head>
        <script>
            function descBtnConcluir() {
                var btnConcluir = [];

                btnConcluir =document.getElementsByClassName("btnConcluir");
                Array.from(btnConcluir).forEach(trocarDescricao);
            }

            function trocarDescricao(item, index, arr){
                if (item.attributes[1].nodeValue == "pendente")
                    item.innerHTML ="Concluir";
                else
                    item.innerHTML ="Reabilitar";
            }
        </script>
    </head>

    <body onload="descBtnConcluir()">
        <h2>TaskPlus - Controle de Tarefas</h2>
        <hr />
        <a href="/">Logout</a>
        <br>
        <br>
        <h1>Adicione tarefas na lista {{lista.descricao}} </h1>

        <form action="/tarefas/{{lista.id}}" method="POST">
            <input type="text" name="descricao" id="descricao">
            <button type="submit">Add Tarefa</button>
        </form>

        <ul>
            {{#each tarefas}}
            <li>
                <p>
                    <b>{{this.descricao}}</b>
                    <br>
                    <p>Status: {{this.status}}</p>
                    <br>
                    <p><a href="/tarefas/tarefa/{{this.id}}">>>Alterar</a></p>

                    <form action="/tarefas/delete/{{this.id}}" method="POST">
                        <button type="submit">Deletar</button>
                    </form>
                    <br>
                    <form action="/tarefas/concluir/{{this.id}}" method="POST">
                        <button class="btnConcluir" status={{this.status}} type="submit">Concluir</button>
                    </form>
                    <br>
                    <br>
                </p>
            </li>
            {{/each}}
        </ul>

        <p>
            <a href="/listas/{{lista.usuarioId}}">Voltar para listas</a>
        </p>
    </body>
</html>